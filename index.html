<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Sandlot Tribune</title>
  <meta name="description" content="The official publication of The Sandlot Dynasty League — season previews, power rankings, trade analysis, and more.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>

  <!-- ===== SITE HEADER / NAV ===== -->
  <header class="site-header">
    <nav class="nav-inner">
      <a class="nav-logo" href="index.html" aria-label="The Sandlot Tribune — Home">
        <img src="assets/images/logo.png" alt="The Sandlot Tribune">
      </a>
      <ul class="nav-links">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="between-the-chalk/index.html">Between The Chalk</a></li>
        <li><a href="season-deadlines/index.html">Season Deadlines &amp; Events</a></li>
        <li><a href="league-records/index.html">League Records</a></li>
        <li><a href="about/index.html">About / The Tribune</a></li>
      </ul>
    </nav>
  </header>

  <!-- ===== HERO ===== -->
  <section class="site-hero">
    <h1>The Sandlot Tribune</h1>
    <p class="tagline">The Official Publication of The Sandlot Dynasty League</p>
    <p class="hero-subtagline">Where Legends Never Die</p>
    <hr class="hero-rule">
  </section>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="page-wrapper">

    <!-- ===== UPCOMING EVENTS — NEW PANEL LAYOUT ===== -->
    <section class="countdown-section" aria-label="Season Countdown">
      <h2 class="section-label">Upcoming Events</h2>

      <div class="events-panel">

        <!-- Left — live countdown to next event -->
        <div class="active-event-pane">
          <span class="active-event-eyebrow">Counting Down To</span>
          <div class="active-event-name" id="active-event-name">Loading&hellip;</div>
          <div class="active-event-date" id="active-event-date"></div>

          <div class="event-clock">
            <div class="event-segment">
              <div class="event-tiles">
                <div class="event-tile" id="e-d0"><div class="event-tile-inner"><span>0</span></div></div>
                <div class="event-tile" id="e-d1"><div class="event-tile-inner"><span>0</span></div></div>
              </div>
              <div class="event-seg-label">Days</div>
            </div>
            <div class="event-colon">:</div>
            <div class="event-segment">
              <div class="event-tiles">
                <div class="event-tile" id="e-h0"><div class="event-tile-inner"><span>0</span></div></div>
                <div class="event-tile" id="e-h1"><div class="event-tile-inner"><span>0</span></div></div>
              </div>
              <div class="event-seg-label">Hrs</div>
            </div>
            <div class="event-colon">:</div>
            <div class="event-segment">
              <div class="event-tiles">
                <div class="event-tile" id="e-m0"><div class="event-tile-inner"><span>0</span></div></div>
                <div class="event-tile" id="e-m1"><div class="event-tile-inner"><span>0</span></div></div>
              </div>
              <div class="event-seg-label">Min</div>
            </div>
            <div class="event-colon">:</div>
            <div class="event-segment">
              <div class="event-tiles">
                <div class="event-tile" id="e-s0"><div class="event-tile-inner"><span>0</span></div></div>
                <div class="event-tile" id="e-s1"><div class="event-tile-inner"><span>0</span></div></div>
              </div>
              <div class="event-seg-label">Sec</div>
            </div>
          </div>
        </div>

        <!-- Right — next 2 upcoming events (static, days only) -->
        <div class="upcoming-events-pane">
          <div class="upcoming-pane-label">Also Ahead</div>
          <div id="upcoming-list">
            <!-- Populated by JS -->
          </div>
        </div>

      </div>
    </section>

    <!-- ===== LATEST NEWS ===== -->
    <section aria-label="Latest News">
      <h2 class="section-label">Latest</h2>
      <div class="articles-grid">

        <!-- Featured Article — ATL Season Preview (most recent) -->
        <article class="article-card article-card--featured">
          <img class="card-image" src="assets/images/atl-preview.png" alt="Atlanta Braves 2026 Season Preview">
          <div class="card-body">
            <span class="card-badge">Season Preview</span>
            <h3 class="card-title">2026 TSDL Season Preview: Atlanta Braves</h3>
            <p class="card-meta">By Tim Kurkjian &nbsp;&middot;&nbsp; February 28, 2026</p>
            <div class="card-rating-row" id="card-rating-season_preview_2026_atl"></div>
            <p class="card-excerpt">
              Justin Winward's Braves went 16-3 in 2025 and claimed the #1 seed — then the playoffs happened. Now, with a loaded keeper core and $135 in auction budget, Atlanta enters 2026 with something to prove.
            </p>
            <a class="card-link" href="season-previews/season_preview_2026_atl.html">Read Article &rarr;</a>
          </div>
        </article>

        <!-- LVA Season Preview -->
        <article class="article-card">
          <img
            class="card-image"
            src="assets/images/lva-preview.png"
            alt="Las Vegas Athletics 2026 Season Preview">
          <div class="card-body">
            <span class="card-badge">Season Preview</span>
            <h3 class="card-title">2026 TSDL Season Preview: Las Vegas Athletics</h3>
            <p class="card-meta">By Keith Law &nbsp;&middot;&nbsp; February 27, 2026</p>
            <div class="card-rating-row" id="card-rating-season_preview_2026_lva"></div>
            <p class="card-excerpt">
              The defending 2024 champions went 15-4 again in 2025 and show no signs of slowing down — Mike DiMauro's Las
              Vegas Athletics enter 2026 with one of the deepest rosters in the league and a farm system loaded enough to
              scare the competition for years to come.
            </p>
            <a class="card-link" href="season-previews/season_preview_2026_lva.html">Read Article &rarr;</a>
          </div>
        </article>

        <!-- STL Season Preview -->
        <article class="article-card">
          <img
            class="card-image"
            src="assets/images/stl-preview.png"
            alt="St. Louis Cardinals 2026 Season Preview">
          <div class="card-body">
            <span class="card-badge">Season Preview</span>
            <h3 class="card-title">2026 TSDL Season Preview: St. Louis Cardinals</h3>
            <p class="card-meta">By Buster Olney &nbsp;&middot;&nbsp; February 27, 2026</p>
            <div class="card-rating-row" id="card-rating-season_preview_2026_stl"></div>
            <p class="card-excerpt">
              After falling to Arizona in the 2025 World Series, the Cards are hoping a hot second half of 2025
              carries over to this season. With limited budget space and several holes to fill, they'll be a team to
              keep an eye on as auction season approaches.
            </p>
            <a class="card-link" href="season-previews/season_preview_2026_stl.html">Read Article &rarr;</a>
          </div>
        </article>

        <!-- ARI Season Preview -->
        <article class="article-card">
          <img
            class="card-image"
            src="assets/images/ari-preview.png"
            alt="Arizona Diamondbacks 2026 Season Preview">
          <div class="card-body">
            <span class="card-badge">Season Preview</span>
            <h3 class="card-title">2026 TSDL Season Preview: Arizona Diamondbacks</h3>
            <p class="card-meta">By Jeff Passan &nbsp;&middot;&nbsp; February 26, 2026</p>
            <div class="card-rating-row" id="card-rating-season_preview_2026_ari"></div>
            <p class="card-excerpt">
              The defending champions enter 2026 as one of the most intriguing rosters in the TSDL —
              built around Paul Skenes, Bryan Woo, and a deep farm system. How does the dynasty hold together heading into auction season?
            </p>
            <a class="card-link" href="season-previews/season_preview_2026_ari.html">Read Article &rarr;</a>
          </div>
        </article>

      </div>
    </section>

    <!-- ===== EXPLORE ===== -->
    <section aria-label="Browse by Section">
      <h2 class="section-label">Explore</h2>
      <div class="explore-grid">

        <a class="explore-card" href="season-previews/index.html">
          <span class="explore-card-title">Season Previews</span>
        </a>

        <a class="explore-card" href="between-the-chalk/index.html">
          <span class="explore-card-title">Between The Chalk</span>
        </a>

        <div class="explore-card" style="cursor:default;">
          <span class="explore-card-title">Power Rankings</span>
          <span class="badge-coming-soon">Coming Soon</span>
        </div>

        <div class="explore-card" style="cursor:default;">
          <span class="explore-card-title">Trade Analysis</span>
          <span class="badge-coming-soon">Coming Soon</span>
        </div>

      </div>
    </section>

  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="site-footer">
    <p>&copy; 2026 The Sandlot Tribune &nbsp;&middot;&nbsp; The Sandlot Dynasty League</p>
  </footer>

  <!-- ===== COUNTDOWN SCRIPT ===== -->
  <script>
    // ── All season events — Eastern Time ──────────────────────────────────────
    var EVENTS = [
      { name: 'Legal Roster Deadline', short: 'Mar 15', date: new Date('2026-03-15T10:00:00-05:00') },
      { name: 'MiLB Draft',            short: 'Mar 15', date: new Date('2026-03-15T12:00:00-05:00') },
      { name: 'FA Auction',            short: 'Mar 22', date: new Date('2026-03-22T12:00:00-05:00') },
      { name: 'FAAB Opens',            short: 'Mar 25', date: new Date('2026-03-25T10:00:00-05:00') },
      { name: 'Trade Deadline',        short: 'Aug 4',  date: new Date('2026-08-04T22:00:00-05:00') },
      { name: 'Playoffs Begin',        short: 'Aug 17', date: new Date('2026-08-17T00:00:00-05:00') },
      { name: 'Season Conclusion',     short: 'Sep 27', date: new Date('2026-09-27T00:00:00-05:00') },
      { name: 'Roster Deadline',       short: 'Nov 1',  date: new Date('2026-11-01T00:00:00-05:00') },
      { name: '2027 FanTrax Season',   short: 'Nov 15', date: new Date('2026-11-15T00:00:00-05:00') },
    ];

    // ── Helpers ───────────────────────────────────────────────────────────────
    function pad2(n) { return String(n).padStart(2, '0'); }

    function daysUntil(date) {
      return Math.ceil((date - Date.now()) / 86400000);
    }

    function formatEventDate(d) {
      var opts = { month: 'long', day: 'numeric', year: 'numeric',
                   hour: 'numeric', minute: '2-digit', timeZoneName: 'short',
                   timeZone: 'America/New_York' };
      return d.toLocaleString('en-US', opts);
    }

    // ── Flip tile ─────────────────────────────────────────────────────────────
    function setTile(id, ch) {
      var el = document.getElementById(id);
      if (!el) return;
      var span = el.querySelector('span');
      if (span.textContent === ch) return;
      el.classList.remove('flipping');
      void el.offsetWidth;
      el.classList.add('flipping');
      setTimeout(function () { span.textContent = ch; }, 110);
    }

    // ── Find active + upcoming events ─────────────────────────────────────────
    function getEventWindow() {
      var now = Date.now();
      var future = EVENTS.filter(function(e) { return e.date > now; });
      if (!future.length) return { active: null, upcoming: [] };
      return { active: future[0], upcoming: future.slice(1, 3) };
    }

    // ── Render the upcoming (right-side) list ─────────────────────────────────
    function renderUpcoming(upcoming) {
      var ul = document.getElementById('upcoming-list');
      if (!ul) return;
      if (!upcoming.length) {
        ul.innerHTML = '<p style="font-family:\'Marcellus\',serif; font-size:0.82rem; color:var(--text-secondary); font-style:italic;">No more events this season.</p>';
        return;
      }
      ul.innerHTML = upcoming.map(function(e) {
        var days = daysUntil(e.date);
        return '<div class="upcoming-event-row">' +
               '<span class="upcoming-date">' + e.short + '</span>' +
               '<span class="upcoming-name">' + e.name + '</span>' +
               '<span class="upcoming-days">' + days + ' day' + (days !== 1 ? 's' : '') + '</span>' +
               '</div>';
      }).join('');
    }

    // ── Main tick ─────────────────────────────────────────────────────────────
    var _lastActiveIdx = -1;

    function tick() {
      var win = getEventWindow();

      if (!win.active) {
        document.getElementById('active-event-name').textContent = 'Season Complete';
        document.getElementById('active-event-date').textContent = '';
        ['e-d0','e-d1','e-h0','e-h1','e-m0','e-m1','e-s0','e-s1'].forEach(function(id) {
          var el = document.getElementById(id);
          if (el) el.querySelector('span').textContent = '0';
        });
        return;
      }

      // Update header text only when active event changes
      var activeIdx = EVENTS.indexOf(win.active);
      if (activeIdx !== _lastActiveIdx) {
        _lastActiveIdx = activeIdx;
        document.getElementById('active-event-name').textContent = win.active.name;
        document.getElementById('active-event-date').textContent = formatEventDate(win.active.date);
        renderUpcoming(win.upcoming);
      }

      // Live countdown
      var diff = win.active.date - Date.now();
      if (diff <= 0) { tick(); return; } // event just passed — re-evaluate
      var d = Math.floor(diff / 86400000);
      var h = Math.floor((diff % 86400000) / 3600000);
      var m = Math.floor((diff % 3600000)  / 60000);
      var s = Math.floor((diff % 60000)    / 1000);
      var ds = pad2(d), hs = pad2(h), ms = pad2(m), ss = pad2(s);
      setTile('e-d0', ds[0]); setTile('e-d1', ds[1]);
      setTile('e-h0', hs[0]); setTile('e-h1', hs[1]);
      setTile('e-m0', ms[0]); setTile('e-m1', ms[1]);
      setTile('e-s0', ss[0]); setTile('e-s1', ss[1]);
    }

    tick();
    setInterval(tick, 1000);
  </script>

  <!-- Firebase: load card ratings on home page -->
  <script type="module">
    import { fetchCardRatings } from './assets/js/article-engagement.js';
    fetchCardRatings([
      'season_preview_2026_atl',
      'season_preview_2026_lva',
      'season_preview_2026_stl',
      'season_preview_2026_ari'
    ]);
  </script>

</body>
</html>
